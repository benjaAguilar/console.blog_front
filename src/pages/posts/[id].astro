---
import { convertToMarkdown } from '../../utils/convertToMarkdown.js'
import Layout from "../../layouts/Layout.astro";

const { id } = Astro.params;
const response = await fetch(`http://localhost:3000/api/posts/${id}`);
const post = await response.json();

const md = await fetch(post.post.contentUrl);
const md2 = await md.text();

const content = await convertToMarkdown(md2);
---

<Layout>
    <h1>{post.post.title}</h1>
    <div set:html={content}></div>
</Layout>